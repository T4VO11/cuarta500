<div class="container mt-4">
    <!-- Botón de Regreso -->
        <button class="btn btn-success btn-lg mb-4 shadow-sm" routerLink="/main/listadoAdeudos"> Volver a listado de pagos </button>


    <div class="card shadow-lg border-0 rounded-4">
        <div class="card-header bg-success text-white">
            <h3 class="mb-0">Simulación de Pago de Mantenimiento Mensual</h3>
        </div>
        <div class="card-body p-4">
            
            <!-- Resumen Fijo del Pago -->
            <div class="alert alert-info d-flex justify-content-between align-items-center mb-4">
                <h4 class="mb-0">Monto Fijo a Pagar:</h4>
                <h2 class="mb-0 text-success fw-bold">$1,000.00 MXN</h2>
            </div>

            <form (ngSubmit)="submitPago(pagoFormRef)" #pagoFormRef="ngForm">
                
                <p class="text-muted small mb-4">Confirma tus datos para procesar el pago simulado. El estado del pago será 'confirmado' automáticamente.</p>

                <!-- CAMPO OCULTO: Enviamos el usuario_id fijo sin mostrarlo -->
                <input type="hidden" 
                       name="usuario_id" 
                       [(ngModel)]="pagoForm.usuario_id">

                <div class="row g-3 mb-4">
                    <!-- Nombre -->
                    <div class="col-md-6">
                        <label class="form-label">Nombre de quien realiza el pago (*)</label>
                        <input type="text" class="form-control" [(ngModel)]="pagoForm.nombre" name="nombre" required>
                    </div>
                    
                    <!-- Número de Casa -->
                    <div class="col-md-6">
                        <label class="form-label">Número de Casa (*)</label>
                        <input type="text" class="form-control" [(ngModel)]="pagoForm.numero_casa" name="numero_casa" required>
                    </div>
                </div>

                <div class="row g-3 mb-5">
                    <!-- Periodo Cubierto (Usando input type="month") -->
                    <div class="col-md-6">
                        <label class="form-label">Período Cubierto (YYYY-MM) (*)</label>
                        <input type="month" class="form-control" [(ngModel)]="pagoForm.periodo_cubierto" name="periodo_cubierto" required>
                        <div class="form-text">Mes y año del mantenimiento a pagar.</div>
                    </div>
                    
                    <!-- Simulación de la Transacción -->
                    <div class="col-md-6 d-flex align-items-end">
                         <div class="alert alert-secondary w-100 mb-0 py-2">
                             <i class="bi bi-shield-fill-check me-2"></i>Pasarela: Pago Simulado (Confirmado).
                         </div>
                    </div>
                </div>
                
                <div class="d-flex justify-content-end">
                    <button type="submit" class="btn btn-success btn-lg" [disabled]="pagoFormRef.invalid || isLoading">
                        <span *ngIf="!isLoading"><i class="bi bi-cash-stack"></i> Confirmar Pago ($1,000.00)</span>
                        <span *ngIf="isLoading"><span class="spinner-border spinner-border-sm me-2"></span>Procesando Pago...</span>
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>